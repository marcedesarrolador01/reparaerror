{% extends "foro/base.html" %}

{% block title %}{{ post.titulo }}{% endblock %}

{% block content %}

<div class="row justify-content-center">

<div class="col-lg-9">

<!-- CARD PRINCIPAL -->

<div class="card shadow-sm mb-4">

<div class="card-body">

<!-- Título + estado -->

<div class="d-flex justify-content-between align-items-start mb-2">

<h3 class="fw-bold mb-0">
{{ post.titulo }}
</h3>

{% if post.estado == "abierto" %}
<span class="badge bg-success">Abierto</span>

{% elif post.estado == "resuelto" %}
<span class="badge bg-primary">Resuelto</span>

{% endif %}


</div>

<!-- Autor -->

<div class="d-flex align-items-center text-muted small mb-3">

<i class="bi bi-person-circle fs-5 me-2"></i>

<div>
<strong>{{ post.autor }}</strong><br>
<span>{{ post.creado|date:"d/m/Y" }}</span>
</div>

</div>

<!-- Categorías -->

<div class="mb-3 small">

<span class="badge bg-light text-dark">{{ post.categoria }}</span>

{% if post.marca %}
<span class="badge bg-light text-dark">{{ post.marca }}</span>
{% endif %}

{% if post.modelo %}
<span class="badge bg-light text-dark">{{ post.modelo }}</span>
{% endif %}

</div>

<!-- Imagen -->

{% if post.imagen %}

<div class="text-center mb-4">

<img src="{{ post.imagen.url }}"
     class="img-fluid rounded"
     style="max-height:400px; object-fit:contain;">

</div>

{% endif %}

<!-- Descripción -->

<div class="fs-6 lh-lg">

{{ post.descripcion|linebreaks }}

</div>

</div>
</div>

<!-- FUTURA ZONA COMENTARIOS -->

<div class="card shadow-sm">

<div class="card-body">

<h5 class="mb-3">Comentarios</h5>

<p class="text-muted small">
Aquí aparecerán las respuestas de otros usuarios.
</p>

</div>

</div>

<!-- BOTONES -->

<div class="mt-4 d-flex justify-content-between">

<a href="{% url 'foro:post_list' %}" class="btn btn-outline-secondary">
← Volver
</a>

{% if user == post.autor and post.estado == "ABIERTO" %}
<a href="#" class="btn btn-success">
Marcar como resuelto
</a>
{% endif %}

</div>

</div>

</div>

{% endblock %}
